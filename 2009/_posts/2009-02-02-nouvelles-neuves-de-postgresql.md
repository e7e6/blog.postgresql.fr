---
layout: post
title: "Nouvelles neuves de PostgreSQL"
author: "NBougain"
redirect_from: "index.php?post/2009-02-02-nouvelles-neuves-de-postgresql "
---


<p><strong>Nouvelles hebdomadaires de PostgreSQL - 25 janvier 2009</strong></p>

<p>Le "Prague PostgreSQL Developers' Day 2009" (P2D2) aura lieu le 12 f&eacute;vrier 2009&nbsp;: 

<a target="_blank" href="http://www.postgresql.org/about/event.808">http://www.postgresql.org/about/event.808</a><br>

Programme&nbsp;: 

<a target="_blank" href="http://www.postgres.cz/p2d2/2009/sched_en.html">http://www.postgres.cz/p2d2/2009/sched_en.html</a></p>

<p>La "PostgreSQL Conference East 09" se tiendra du 3 au 5 avril 2009 &agrave; l'Universit&eacute; Drexel de Philadelphia. L'appel aux conf&eacute;renciers est d'ores et d&eacute;j&agrave; lanc&eacute;&nbsp;: 

<a target="_blank" href="http://www.postgresqlconference.org/2009/east/">http://www.postgresqlconference.org/2009/east/</a></p>

<p>Nouveau sondage&nbsp;: Vivez-vous pr&egrave;s d'un PUG ? [ndt:Pg User Group - Association d'Utilisateurs de PostgreSQL] 

<a target="_blank" href="http://www.postgresql.org/community/">http://www.postgresql.org/community/</a></p>

<p><strong>Les nouveaut&eacute;s des produits d&eacute;riv&eacute;s</strong></p>

<ul>

<li>pgpool-II 2.2beta1&nbsp;: 

<a target="_blank" href="http://pgfoundry.org/projects/pgpool/">http://pgfoundry.org/projects/pgpool/</a></li>

<li>pgTAP 0.15&nbsp;: 

<a target="_blank" href="http://pgtap.projects.postgresql.org/">http://pgtap.projects.postgresql.org/</a></li>

</ul>

<p><strong>L'astuce de la semaine</strong></p>

<p>Pour am&eacute;liorer les performances, il est g&eacute;n&eacute;ralement utile de placer le journal des transactions (pg_xlog) sur un(e) disque/matrice ind&eacute;pendant(e), id&eacute;alement avec un canal d'entr&eacute;e/sortie d&eacute;di&eacute;.</p>

<!--more-->


<p><strong>Offres d'emplois autour de PostgreSQL en janvier</strong></p>

<ul>

<li><a target="_blank" href="http://archives.postgresql.org/pgsql-jobs/2009-01/threads.php">http://archives.postgresql.org/pgsql-jobs/2009-01/threads.php</a></li>

</ul>

<p><strong>PostgreSQL Local</strong></p>

<ul>

<li>Richard Broersma fait le lien entre les volontaires pour la rencontre de SCALE (cf. plus bas). Contact : richard POINT broersma CHEZ gmail POINT com.</li>

<li>Le SYDPUG se r&eacute;unira le 3 f&eacute;vrier 2009 &agrave; 18h30 chez Fujitsu Australia, Sydney Nord. Mark Leslie pr&eacute;sentera l'histoire et les motivations de PostGIS&nbsp;: 

<a target="_blank" href="http://archives.postgresql.org/sydpug/2009-01/msg00000.php">http://archives.postgresql.org/sydpug/2009-01/msg00000.php</a></li>

<li>Beaucoup des suspects habituels se retrouveront au FOSDEM les 7 &amp; 8 f&eacute;vrier &agrave; Bruxelles, Belgique&nbsp;: 

<a target="_blank" href="http://wiki.postgresql.eu/wiki/FOSDEM_2009">http://wiki.postgresql.eu/wiki/FOSDEM_2009</a></li>

<li>Le JNBPUG se r&eacute;unira le 9 f&eacute;vrier &agrave; 19h au News Cafe sur New Road &agrave; Midrand.</li>

<li>Le SFPUG est fier de pr&eacute;senter&nbsp;: Reece Hart, "Unison DB for Computational Biology", le 10 f&eacute;vrier 2009. Locations ouvertes aux les pr&eacute;inscrits&nbsp;: 

<a target="_blank" href="http://postgresql.meetup.com/1/calendar/9351228/">http://postgresql.meetup.com/1/calendar/9351228/</a></li>

<li>PostgreSQL sera au "SCALE" du 20 au 22 f&eacute;vrier &agrave; Los Angeles&nbsp;: 

<a target="_blank" href="http://www.socallinuxexpo.org/">http://www.socallinuxexpo.org/</a></li>

<li>Conf&eacute;rence d'Andreas 'ads' Scherbaum lors du "Perl Workshop 2009" le 25 f&eacute;vrier &agrave; Francfort-sur-le-Main, en Allemagne&nbsp;: 

<a target="_blank" href="http://www.perl-workshop.de/talks/151/view">http://www.perl-workshop.de/talks/151/view</a></li>

<li>"PostgreSQL Conference, U.S." organise un PgDay lors de la "LinuxFest Northwest" (25 &amp; 26 avril). L'appel aux conf&eacute;rences est visible &agrave; l'adresse&nbsp;: 

<a target="_blank" href="http://www.postgresqlconference.org/">http://www.postgresqlconference.org/</a></li>

<li>La PGCon 2009 se tiendra &agrave; l'Universit&eacute; d'Ottawa les 21 et 22 mai 2009. Elle sera pr&eacute;c&eacute;d&eacute;e de deux jours de tutoriels les 19 &amp; 20 mai&nbsp;: 

<a target="_blank" href="http://www.pgcon.org/2009/papers.php">http://www.pgcon.org/2009/papers.php</a></li>

<li>La "PGCon Brazil" prendra place &agrave; l'Unicamp de Campinas (&Eacute;tat de S&atilde;o Paulo) les 23 &amp; 24 octobre 2009.</li>

</ul>

<p><strong>PostgreSQL dans les m&eacute;dia</strong></p>

<ul>

<li>Planet PostgreSQL&nbsp;: 

<a target="_blank" href="http://planet.postgresql.org/">http://planet.postgresql.org/</a></li>

</ul>

<p><i>PostgreSQL Weekly News / les nouvelles hebdomadaires vous sont offertes cette semaine par David Fetter et Josh Berkus. La traduction en est assur&eacute;e par l'&eacute;quipe PostgreSQLFr.</i></p>

<p><i>Proposez vos articles ou annonces avant dimanche 15:00 (heure du Pacifique). Merci de les envoyer en anglais &agrave; david (a) fetter.org, en allemand &agrave; pwn (a) pgug.de, en italien &agrave; pwn (a) itpug.org.</i></p>

<p><strong>Correctifs appliqu&eacute;s</strong></p>

<p>Peter Eisentraut a commit&eacute;&nbsp;:</p>

<ul>

<li>In pgsql/src/interfaces/libpq/fe-secure.c, message wordsmithing</li>

<li>Alter the regression test cases that rely on the sort order of "ch" between "cg" and "ci". This eliminates a test failure on the following glibc locales: br_FR, cs_CZ, cy_GB, es_EC, es_US, hsb_DE, ig_NG, ik_CA, sk_SK.</li>

<li>Alter regression test cases that rely on the sort order of "aa". Some locales (da_DK, fo_FO, kl_GL, nb_NO, nn_NO in glibc) sort "aa" after "z".</li>

<li>Avoid regression test cases that fail in locales that sort "v" and "w" equally (in glibc: et_EE, sv_SE, tk_TM). It turns out that this was already taken care of previously by select_1.out, which I had forgotten to update for an unrelated change. But might as well avoid the issue altogether.</li>

<li>Revise the permission checking on user mapping DDL commands. CREATE/ALTER/DROP USER MAPPING are now allowed either by the server owner or by a user with USAGE privileges for his own user name. This is more or less what the SQL standard wants anyway (plus "implementation-defined") Hide information_schema.user_mapping_options.option_value, unless the current user is the one associated with the user mapping, or is the server owner and the mapping is for PUBLIC, or is a superuser. This is to protect passwords. Also, fix a bug in information_schema._pg_foreign_servers, which hid servers using wrappers where the current user did not have privileges on the wrapper. The correct behavior is to hide servers where the current user has no privileges on the server.</li>

<li>In pgsql/src/nls-global.mk, do not msgmerge against /dev/null; merge against the pot file itself instead.</li>

<li>Automatic view update rules. Bernd Helmle.</li>

<li>Recreate ecpg_config.h with a stamp file created by config.status, same way pg_config.h is handled. This avoids reruns of config.status on every build, if configure has been rerun.</li>

<li>Message style review for ecpg.</li>

</ul>

<p>Magnus Hagander a commit&eacute;&nbsp;:</p>

<ul>

<li>Use the new text domain names ("postgres-8.4" instead of "postgres"). Hiroshi Inoue.</li>

<li>In pgsql/src/tools/msvc/Install.pm, install .mo files for NLS as &lt;program&gt;-&lt;version&gt;.mo when building with MSVC as well. Same change as made earlier for autoconf builds. Per Hiroshi Inoue.</li>

<li>Make some strings translatable again that were accidentally removed in earlier patch to fix "printf-arguments".</li>

<li>Make win32 builds always do SetEnvironmentVariable() when doing putenv(). Also, if linked against other versions than the default MSVCRT library (for example the MSVC build which links against MSVCRT80), also update the cache in the default MSVCRT at the same time. This should fix the issues with setting LC_MESSAGES on the MSVC build. Original patch from Hiroshi Inoue and Hiroshi Saito, much rewritten by me.</li>

<li>In pgsql/src/backend/utils/adt/pg_locale.c, remove stray ' character at end of line. For some reason it broke OpenBSD compile even when it's inside a #ifdef WIN32 block.....</li>

<li>In pgsql/src/backend/utils/mb/mbutils.c, explicitly bind gettext to the correct encoding on Windows. Original patch from Hiroshi Inoue.</li>

</ul>

<p>Tom Lane a commit&eacute;&nbsp;:</p>

<ul>

<li>In pgsql/src/interfaces/libpq/fe-secure.c, fix accidental (I suppose) introduction of non-ASCII quote marks.</li>

<li>Support column-level privileges, as required by SQL standard. Stephen Frost, with help from KaiGai Kohei and others</li>

<li>In pgsql/src/backend/libpq/ip.c, tweak the existing special case for AIX in pg_getaddrinfo_all() to handle yet another failure case in AIX's getaddrinfo(). Per report and patch by Andrew Chernow.</li>

</ul>

<p>Bruce Momjian a commit&eacute;&nbsp;:</p>

<ul>

<li>In pgsql/src/bin/psql/describe.c, document RELKIND_SPECIAL reference in psql, from &lt;= 8.1.X.</li>

<li>Make psql \d and \dt consistent for system tables, i.e prevent \d from showing system tables, make \dS pattern show system table details, and have \dtS show system and _user_ tables, to be consistent with other \d* commands.</li>

<li>In pgsql/doc/src/sgml/ref/psql-ref.sgml, update \d*S documentation to be more accurate; system objects are added to the display, not restricted in the display; new text: The letter &lt;literal&gt;S&lt;/literal&gt; adds the listing of system objects; without &lt;literal&gt;S&lt;/literal&gt;, only non-system objects are shown.</li>

<li>In pgsql/doc/src/sgml/ref/select.sgml, document that SELECT FOR UPDATE/SHARE with ORDER BY might return results in the incorrect order, per bug 4593. Backpatch to 8.3.X.</li>

</ul>

<p>Alvaro Herrera a commit&eacute;&nbsp;:</p>

<ul>

<li>In pgsql/src/backend/postmaster/autovacuum.c, fix erroneous memory context switch in autovacuum, which was returning to a context long after it had been destroyed. Per problem report from Justin Pasher. Patch by Tom Lane and me. 8.3 and later do not have this bug, because this code has been restructured for unrelated reasons. In 8.2 it does not manifest as a crash, but it still seems safer fixing it nonetheless.</li>

</ul>

<p>Heikki Linnakangas a commit&eacute;&nbsp;:</p>

<ul>

<li>Add a new option to RestoreBkpBlocks() to indicate if a cleanup lock should be used instead of the normal exclusive lock, and make WAL redo functions responsible for calling RestoreBkpBlocks(). They know better what kind of a lock they need. At the moment, this just moves things around with no functional change, but makes the hot standby patch that's under review cleaner.</li>

<li>Add new SPI_OK_REWRITTEN return code to SPI_execute and friends, for the case that the command is rewritten into another type of command. The old behavior to return the command tag of the last executed command was pretty surprising. In PL/pgSQL, for example, it meant that if a command was rewritten to a utility statement, FOUND wasn't set at all.</li>

<li>Forgot to handle the new SPI_OK_REWRITTEN result code in a couple places.</li>

<li>Update comments to reflect that tgenabled is not a boolean anymore. Jonah Harris, with minor tinkering by me.</li>

<li>In pgsql/src/backend/commands/vacuumlazy.c, only skip pages marked as clean in the visibility map, if the last 32 pages were marked as clean as well. The idea is to avoid defeating OS readahead by skipping a page here and there, and also makes it less likely that we miss an opportunity to advance relfrozenxid, for the sake of only a few skipped pages.</li>

<li>In pgsql/src/backend/access/transam/xlog.c, put back fast-path for the case that there's no backup blocks in RestoreBkpBlocks. Went missing in my recent refactoring patch, as pointed out by Simon's hot standby patch.</li>

</ul>

<p><strong>Correctifs rejet&eacute;s (&agrave; ce jour)</strong></p>

<ul>

<li>Jeff Davis's patch to fix some lock conflict behavior.</li>

</ul>

<p><strong>Correctifs en attente</strong></p>

<ul>

<li>Robert Haas sent in a patch to do JOIN removal for 8.5.</li>

<li>Magnus Hagander and Hiroshi Inoue each sent in another revision of the lc_messages patch for the Japanese language.</li>

<li>Teodor Sigaev sent in another revision of the patch to add B-Tree emulation to GIN.</li>

<li>Teodor Sigaev sent in five more revisions of the GIN improvements patch.</li>

<li>Bernd Helmle sent in another revision of his automatic view updates patch.</li>

<li>Koichi Suzuki sent in two more revisions of his patch to improve PITR performance.</li>

<li>Brendan Jurd sent in a patch to fix the meridiem markers.</li>

<li>Hiroshi Inoue sent in another revision of the patch to bind gettext() to the UTF8 locale when in use.</li>

<li>Heikki Linnakangas sent in a patch to make readahead more efficient in some cases.</li>

<li>Bryce Nesbitt sent in two more revisions of his pg_dump patch to allow people to make it not notify the stats collector.</li>

<li>Bryce Nesbitt sent in an alternate patch to the one above which documents the statistics collector's behavior on pg_dump.</li>

<li>Zdenek Kotala sent in a patch which adds a capability to have a single record for all reloption kinds in the reloption list.</li>

<li>Simon Riggs sent in three more revisions of the Hot Standby patch.</li>

<li>Andrew Dunstan sent in another revision of the parallel pg_restore patch.</li>

<li>Ramon Lawrence sent in another revision of the patch to improve hash joins in skewed distributions.</li>

<li>KaiGai Kohei and Robert Haas sent revisions of the SE-PostgreSQL patches.</li>

<li>Koichi Suzuki sent in another revision of the pg_readahead patch.</li>

<li>ITAGAKI Takahiro sent in a patch to supress compiler warnings in pg_locale.c and pg_regress.c when nls is enabled.</li>

<li>Mark Kirkwood sent in a patch to expose lock_wait statistics on platforms without Dtrace.</li>

<li>Heikki Linnakangas sent in a couple of patches atop the Hot Standby patch.</li>

<li>Alvaro Herrera sent in a patch which extracts reloptions from a pg_class tuple, to be used by relcache code only.</li>

<li>Magnus Hagander sent in another patch to fix pg_restore in cases where incompatible options got sent to it.</li>

<li>Martin Pihlak sent in a patch that increases the autovacuum stats age tolerance to autovacuum_naptime.</li>

<li>Alvaro Herrera sent in a WIP patch fixing autovacuum to work with the new reloptions. This removes pg_autovacuum.</li>

</ul>