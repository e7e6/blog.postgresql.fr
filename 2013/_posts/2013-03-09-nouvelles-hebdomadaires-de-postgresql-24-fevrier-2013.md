---
layout: post
title: "Nouvelles hebdomadaires de PostgreSQL - 24 f√©vrier 2013"
author: "NBougain"
redirect_from: "index.php?post/2013-03-09-nouvelles-hebdomadaires-de-postgresql-24-fevrier-2013 "
---


<p>L'appel &agrave; conf&eacute;renciers pour <em>PostgreSQL Brazil</em>, &eacute;v&eacute;nement tenu du 15 au 17 ao&ucirc;t 2013 &agrave; Porto Velho, &Eacute;tat du Rond&ocirc;nia au Br&eacute;sil, est lanc&eacute;. Les propositions sont attendues jusqu'au 15 mars&nbsp;: 

<a target="_blank" href="http://pgbr.postgresql.org.br/2013/chamada.en.php">http://pgbr.postgresql.org.br/2013/chamada.en.php</a></p>

<p>Le programme du <em>PGCon</em>, la conf&eacute;rence mondiale des d&eacute;veloppeurs PostgreSQL, est en ligne&nbsp;: 

<a target="_blank" href="http://www.pgcon.org/2013/schedule/events.en.html?pgannounce">http://www.pgcon.org/2013/schedule/events.en.html?pgannounce</a></p>

<p><strong>Les nouveaut&eacute;s des produits d&eacute;riv&eacute;s</strong></p>

<ul>

<li>Le cinqui&egrave;me LiveCD PostgreSQL, cette fois bas&eacute; sur PostgreSQL 9.2.3 et CentOS 6.3&nbsp;: 

<a target="_blank" href="http://pglivecd.org">http://pglivecd.org</a></li>

<li>AnySQL Maestro 13.2, un outil de gestion utilisant ODBC et compatible PostgreSQL&nbsp;: 

<a target="_blank" href="http://www.sqlmaestro.com/products/anysql/maestro/">http://www.sqlmaestro.com/products/anysql/maestro/</a></li>

<li>ODB 2.2.0, un ORM pour le d&eacute;veloppement C++, compatible PostgreSQL&nbsp;: 

<a target="_blank" href="http://www.codesynthesis.com/~boris/blog/2013/02/13/odb-2-2-0-released/">http://www.codesynthesis.com/~boris/blog/2013/02/13/odb-2-2-0-released/</a></li>

<li>openBarter 0.7.0, une extension PostgreSQL impl&eacute;mentant les primitives d'un march&eacute; du troc&nbsp;: 

<a target="_blank" href="http://pgxn.org/dist/openbarter/0.7.0/">http://pgxn.org/dist/openbarter/0.7.0/</a></li>

<li>PostgreDAC 2.9.3, un <em>builder</em> Delphi/C++ pour PostgreSQL&nbsp;: 

<a target="_blank" href="http://microolap.com/products/connectivity/postgresdac/download/">http://microolap.com/products/connectivity/postgresdac/download/</a></li>

</ul>

<p><strong>Offres d'emplois autour de PostgreSQL en f&eacute;vrier</strong></p>

<ul>

<li>Internationales&nbsp;: 

<a target="_blank" href="http://archives.postgresql.org/pgsql-jobs/2013-02/threads.php">http://archives.postgresql.org/pgsql-jobs/2013-02/threads.php</a>;</li>

<li>Francophones&nbsp;: 

<a target="_blank" href="http://forums.postgresql.fr/viewforum.php?id=4">http://forums.postgresql.fr/viewforum.php?id=4</a>.</li>

</ul>

<p><strong>PostgreSQL Local</strong></p>

<ul>

<li>Le PyPgDay aura lieu le 13 mars au <em>Santa Clara Convention Center</em>, le premier jour de la <em>PyCon</em>. Informations par l&agrave;&nbsp;: 

<a target="_blank" href="http://wiki.postgresql.org/wiki/PyPgDay2013">http://wiki.postgresql.org/wiki/PyPgDay2013</a></li>

<li>Le PGDay 2013 de New-York City aura lieu le 22 mars&nbsp;: 

<a target="_blank" href="http://pgday.nycpug.org/">http://pgday.nycpug.org/</a></li>

<li>Le PgDay Fr est l'&eacute;v&eacute;nement majeur de la communaut&eacute; francophone. La date limite pour les propositions de conf&eacute;rence est le samedi 24 mars 2013 &agrave; 23h59 CEST&nbsp;: 

<a target="_blank" href="http://pgday.fr/call_for_papers">http://pgday.fr/call_for_papers</a></li>

<li>La <em>PostgreSQL Session</em> est programm&eacute;e pour le 28 mars 2013 &agrave; Paris. L'appel &agrave; conf&eacute;renciers est lanc&eacute;&nbsp;: 

<a target="_blank" href="http://www.postgresql-sessions.org/en/5/">http://www.postgresql-sessions.org/en/5/</a></li>

<li>PGCon 2013 aura lieu les 23 &amp; 24 mai 2013 &agrave; l'Universit&eacute; d'Ottawa&nbsp;: 

<a target="_blank" href="http://www.pgcon.org/2013/">http://www.pgcon.org/2013/</a></li>

<li>La 6&egrave;me conf&eacute;rence annuelle "Prague PostgreSQL Developers Day", organis&eacute;e par le CSPUG (Groupe des utilisateurs tch&egrave;ques et slovaques de PostgreSQL), aura lieu le 30 mai 2013 &agrave; la Facult&eacute; des Sciences Math&eacute;matiques &amp; Physiques de l'Universit&eacute; Charles (Malostranske namesti 25, Prague). Les candidatures des conf&eacute;renciers sont attendues jusqu'au 14 avril &agrave; l'adresse &lt;info AT p2d2 POINT cz&gt;. D'avantage d'informations sur le site&nbsp;: 

<a target="_blank" href="http://www.p2d2.cz/">http://www.p2d2.cz/</a></li>

</ul>

<p><strong>PostgreSQL dans les m&eacute;dia</strong></p>

<ul>

<li>Planet PostgreSQL&nbsp;: 

<a target="_blank" href="http://planet.postgresql.org/">http://planet.postgresql.org/</a></li>

<li>Planet PostgreSQLFr&nbsp;: 

<a target="_blank" href="http://planete.postgresql.fr/">http://planete.postgresql.fr/</a></li>

</ul>

<p><i>PostgreSQL Weekly News / les nouvelles hebdomadaires vous sont offertes cette semaine par David Fetter. Traduction par l'&eacute;quipe PostgreSQLFr sous licence CC BY-NC-SA.</i></p>

<p><i>Proposez vos articles ou annonces avant dimanche 15:00 (heure du Pacifique). Merci de les envoyer en anglais &agrave; david (a) fetter.org, en allemand &agrave; pwn (a) pgug.de, en italien &agrave; pwn (a) itpug.org et en espagnol &agrave; pwn (a) arpug.com.ar.</i></p>

<p>(<a target="_blank" href="http://www.postgresql.org/message-id/20130225050012.GI9950@fetter.org">lien vers l'article original</a>)</p>

<!--more-->


<p><strong>Correctifs appliqu&eacute;s</strong></p>

<p>Peter Eisentraut a pouss&eacute;&nbsp;:</p>

<ul>

<li>Add ALTER ROLE ALL SET command. This generalizes the existing ALTER ROLE ... SET and ALTER DATABASE ... SET functionality to allow creating settings that apply to all users in all databases. reviewed by Pavel Stehule 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/9475db3a4eb5876b364254886d2730db01e042fd">http://git.postgresql.org/pg/commitdiff/9475db3a4eb5876b364254886d2730db01e042fd</a></li>

<li>Add quotes to messages 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/4f362926692631a67cd76b747f92389c8f63478e">http://git.postgresql.org/pg/commitdiff/4f362926692631a67cd76b747f92389c8f63478e</a></li>

<li>doc: Add more compatibility information for triggers. Louis-Claude Canon and Josh Kupershmidt 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/8e8d0f7e80d80c61b09346a84059457aeeeae548">http://git.postgresql.org/pg/commitdiff/8e8d0f7e80d80c61b09346a84059457aeeeae548</a></li>

<li>Correct tense in log message 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/ca9c66660207164d08c5bbeba1a992152275d4e7">http://git.postgresql.org/pg/commitdiff/ca9c66660207164d08c5bbeba1a992152275d4e7</a></li>

<li>doc: Remove PostgreSQL version number from xml2 deprecation notice. It is obviously no longer true. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/3163baa6d2d12c28f45fec60ab313537ea9a43a4">http://git.postgresql.org/pg/commitdiff/3163baa6d2d12c28f45fec60ab313537ea9a43a4</a></li>

</ul>

<p>Alvaro Herrera a pouss&eacute;&nbsp;:</p>

<ul>

<li>Split pgstat file in smaller pieces. We now write one file per database and one global file, instead of having the whole thing in a single huge file. This reduces the I/O that must be done when partial data is required -- which is all the time, because each process only needs information on its own database anyway. Also, the autovacuum launcher does not need data about tables and functions in each database; having the global stats for all DBs is enough. Catalog version bumped because we have a new subdir under PGDATA. Author: Tomas Vondra. Some rework by &Aacute;lvaro Testing by Jeff Janes Other discussion by Heikki Linnakangas, Tom Lane. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/187492b6c2e8cafc5b39063ca3b67846e8155d24">http://git.postgresql.org/pg/commitdiff/187492b6c2e8cafc5b39063ca3b67846e8155d24</a></li>

<li>Move ExceptionalCondition back to postgres.h. It needs to be defined in the backend even when assertions are not enabled. It's cleaner to put it back, than create a separate #ifdef section in c.h. Per trouble report from Jeff Janes 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/a40d09e27fefbeca0d6994471b3e6965f1ac9dda">http://git.postgresql.org/pg/commitdiff/a40d09e27fefbeca0d6994471b3e6965f1ac9dda</a></li>

<li>Remove useless variable. Per Jeff Janes 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/6e3fd964632e95c7359457b7d67aa20c72a71679">http://git.postgresql.org/pg/commitdiff/6e3fd964632e95c7359457b7d67aa20c72a71679</a></li>

<li>Move relpath() to libpgcommon. This enables non-backend code, such as pg_xlogdump, to use it easily. The previous location, in src/backend/catalog/catalog.c, made that essentially impossible because that file depends on many backend-only facilities; so this needs to live separately. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/a73018392636ce832b09b5c31f6ad1f18a4643ea">http://git.postgresql.org/pg/commitdiff/a73018392636ce832b09b5c31f6ad1f18a4643ea</a></li>

<li>Blind attempt at fixing the non-MSVC Windows builds. Apparently, they need -DBUILDING_DLL for the Assert() declarations to work correctly. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/af0a4c5924061869ee3db391900ab745107c966f">http://git.postgresql.org/pg/commitdiff/af0a4c5924061869ee3db391900ab745107c966f</a></li>

<li>Fix copy-and-pasteo. Harmless, but it's certainly better like this. Noticed by Andres Freund 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/f03a779751f6fc8dc87628d021510c4ec9e1e667">http://git.postgresql.org/pg/commitdiff/f03a779751f6fc8dc87628d021510c4ec9e1e667</a></li>

<li>Fix some typos and grammatical mistakes. ... as well a update copyrights statements to 2013. Noted by Thom Brown and Peter Geoghegan 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/45919335493291ef43f9b66c81a56d32a562ab5a">http://git.postgresql.org/pg/commitdiff/45919335493291ef43f9b66c81a56d32a562ab5a</a></li>

<li>contrib/Makefile also needs updated. Erik Rijkers 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/36f697cbba44fd55f23727066c3274fd01919640">http://git.postgresql.org/pg/commitdiff/36f697cbba44fd55f23727066c3274fd01919640</a></li>

<li>Add pg_xlogdump contrib program. This program relies on rm_desc backend routines and the xlogreader infrastructure to emit human-readable rendering of WAL records. Author: Andres Freund, with many reworks by &Aacute;lvaro Reviewed (in a much earlier version) by Peter Eisentraut 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/639ed4e84b7493594860f56b78b25fd113e78fd7">http://git.postgresql.org/pg/commitdiff/639ed4e84b7493594860f56b78b25fd113e78fd7</a></li>

</ul>

<p>Heikki Linnakangas a pouss&eacute;&nbsp;:</p>

<ul>

<li>Fix yet another typo in comment. Etsuro Fujita 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/5d6899dbae7ac19d90f135e2ad64832e4ca8d064">http://git.postgresql.org/pg/commitdiff/5d6899dbae7ac19d90f135e2ad64832e4ca8d064</a></li>

<li>Don't pass NULL to fprintf, if a bogus connection string is given to pg_dump. Back-patch to all supported branches. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/2930c05634bcb7491bc443a493405e927ed08443">http://git.postgresql.org/pg/commitdiff/2930c05634bcb7491bc443a493405e927ed08443</a></li>

<li>Fix pg_dumpall with database names containing =. If a database name contained a '=' character, pg_dumpall failed. The problem was in the way pg_dumpall passes the database name to pg_dump on the command line. If it contained a '=' character, pg_dump would interpret it as a libpq connection string instead of a plain database name. To fix, pass the database name to pg_dump as a connection string, "dbname=foo", with the database name escaped if necessary. Back-patch to all supported branches. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/f435cd1d385859a0cdb1d70fccc21dde2b1ee116">http://git.postgresql.org/pg/commitdiff/f435cd1d385859a0cdb1d70fccc21dde2b1ee116</a></li>

<li>Fix thinko in previous commit. We must still initialize minRecoveryPoint if we start straight with archive recovery, e.g when recovering from a normal base backup taken with pg_start/stop_backup. Otherwise we never consider the system consistent. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/6c4f6664b201bea77eb6e3f813559e3911a5ef35">http://git.postgresql.org/pg/commitdiff/6c4f6664b201bea77eb6e3f813559e3911a5ef35</a></li>

<li>If recovery.conf is created after "pg_ctl stop -m i", do crash recovery. If you create a base backup using an atomic filesystem snapshot, and try to perform PITR starting from that base backup, or if you just kill a master server and create recovery.conf to put it into standby mode, we don't know how far we need to recover before reaching consistency. Normally in crash recovery, we replay all the WAL present in pg_xlog, and assume that we're consistent after that. And normally in archive recovery, minRecoveryPoint, backupEndRequired, or backupEndPoint is set in the control file, indicating how far we need to replay to reach consistency. But if the server was previously up and running normally, and you kill -9 it or take an atomic filesystem snapshot, none of those fields are set in the control file. The solution is to perform crash recovery first, replaying all the WAL in pg_xlog. After that's done, we assume that the system is consistent like in normal crash recovery, and switch to archive recovery mode after that. Per report from Kyotaro HORIGUCHI. In his scenario, recovery.conf was created after "pg_ctl stop -m i". I'm not sure we need to support that exact scenario, but we should support backing up using a filesystem snapshot, which looks identical. This issue goes back to at least 9.0, where hot standby was introduced and we started to track when consistency is reached. In 9.1 and 9.2, we would open up for hot standby too early, and queries could briefly see an inconsistent state. But 9.2 made it more visible, as we started to PANIC if we see a reference to a non-existing page during recovery, if we've already reached consistency. This is a fairly big patch, so back-patch to 9.2 only, where the issue is more visible. We can consider back-patching further after this has received some more testing in 9.2 and master. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/abf5c5c9a4f142b3343614746bb9e99a794f8e7b">http://git.postgresql.org/pg/commitdiff/abf5c5c9a4f142b3343614746bb9e99a794f8e7b</a></li>

</ul>

<p>Tom Lane a pouss&eacute;&nbsp;:</p>

<ul>

<li>Add postgres_fdw contrib module. There's still a lot of room for improvement, but it basically works, and we need this to be present before we can do anything much with the writable-foreign-tables patch. So let's commit it and get on with testing. Shigeru Hanada, reviewed by KaiGai Kohei and Tom Lane 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/d0d75c402217421b691050857eb3d7af82d0c770">http://git.postgresql.org/pg/commitdiff/d0d75c402217421b691050857eb3d7af82d0c770</a></li>

<li>Teach MSVC build system about postgres_fdw. Per buildfarm. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/699d70b2ec2cb6dc07f6c5b2876609301ddd20a8">http://git.postgresql.org/pg/commitdiff/699d70b2ec2cb6dc07f6c5b2876609301ddd20a8</a></li>

<li>Need to decorate XactIsoLevel as PGDLLIMPORT for postgres_fdw. Per buildfarm. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/54a278683531edac535e6aa4d5427799409823f1">http://git.postgresql.org/pg/commitdiff/54a278683531edac535e6aa4d5427799409823f1</a></li>

<li>Adjust postgres_fdw's search path handling. Set the remote session's search path to exactly "pg_catalog" at session start, then schema-qualify only names that aren't in that schema. This greatly reduces clutter in the generated SQL commands, as seen in the regression test changes. Per discussion. Also, rethink use of FirstNormalObjectId as the "built-in object" cutoff --- FirstBootstrapObjectId is safer, since the former will accept objects in information_schema for instance. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/6d06049493862f7f6b639035198fc817949723ae">http://git.postgresql.org/pg/commitdiff/6d06049493862f7f6b639035198fc817949723ae</a></li>

<li>Change postgres_fdw to show casts as casts, not underlying function calls. On reflection this method seems to be exposing an unreasonable amount of implementation detail. It wouldn't matter when talking to a remote server of the identical Postgres version, but it seems likely to make things worse not better if the remote is a different version with different casting infrastructure. Instead adopt ruleutils.c's policy of regurgitating the cast as it was originally specified; including not showing it at all, if it was implicit to start with. (We must do that because for some datatypes explicit and implicit casts have different semantics.) 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/211e157a51bf94dfcc143e78221951411f87e4b2">http://git.postgresql.org/pg/commitdiff/211e157a51bf94dfcc143e78221951411f87e4b2</a></li>

<li>Get rid of postgres_fdw's assumption that remote type OIDs match ours. The only place we depended on that was in sending numeric type OIDs in PQexecParams; but we can replace that usage with explicitly casting each Param symbol in the query string, so that the types are specified to the remote by name not OID. This makes no immediate difference but will be essential if we ever hope to support use of non-builtin types. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/5fd386bb31f9a8ed5058093bc3f8937fdde3dbec">http://git.postgresql.org/pg/commitdiff/5fd386bb31f9a8ed5058093bc3f8937fdde3dbec</a></li>

<li>Fix whole-row references in postgres_fdw. The optimization to not retrieve unnecessary columns wasn't smart enough. Noted by Thom Brown. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/6da378dbc97f1b96bf5778a558e168a0dc405bce">http://git.postgresql.org/pg/commitdiff/6da378dbc97f1b96bf5778a558e168a0dc405bce</a></li>

<li>Fix some planning oversights in postgres_fdw. Include eval costs of local conditions in remote-estimate mode, and don't assume the remote eval cost is zero in local-estimate mode. (The best we can do with that at the moment is to assume a seqscan, which may well be wildly pessimistic ... but zero won't do at all.) To get a reasonable local estimate, we need to know the relpages count for the remote rel, so improve the ANALYZE code to fetch that rather than just setting the foreign table's relpages field to zero. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/c0c6acdfa055b0c76ea0d1defd4c2c0d5a5c256f">http://git.postgresql.org/pg/commitdiff/c0c6acdfa055b0c76ea0d1defd4c2c0d5a5c256f</a></li>

<li>Rename postgres_fdw's use_remote_explain option to use_remote_estimate. The new name was originally my typo, but per discussion it seems like a better name anyway. So make the code match the docs, not vice versa. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/09a7cd409e762f0430a5d474f4d8d7c962369a8e">http://git.postgresql.org/pg/commitdiff/09a7cd409e762f0430a5d474f4d8d7c962369a8e</a></li>

<li>Fix build of contrib/pg_xlogdump. rmgrdesc.c is not auto-generated now, though it apparently was the last time the Makefile was updated. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/e5bf0c376ed43feaebbe37519a6b8bc8e795f1d2">http://git.postgresql.org/pg/commitdiff/e5bf0c376ed43feaebbe37519a6b8bc8e795f1d2</a></li>

</ul>

<p>Andrew Dunstan a pouss&eacute;&nbsp;:</p>

<ul>

<li>Provide MSVC build setup for pg_xlogdump. 

<a target="_blank" href="http://git.postgresql.org/pg/commitdiff/786170d74f30bc8d3017149dc444f3f3e29029a7">http://git.postgresql.org/pg/commitdiff/786170d74f30bc8d3017149dc444f3f3e29029a7</a></li>

</ul>

<p><strong>Correctifs rejet&eacute;s (&agrave; ce jour)</strong></p>

<ul>

<li>Pas de d&eacute;ception cette semaine&nbsp;:-)</li>

</ul>

<p><strong>Correctifs en attente</strong></p>

<ul>

<li>Zoltan Boszormenyi sent in a pair of patches to fix a pair of bugs: one where recovery.conf was generated without double-escaping quoted values, and another in parsing the connection string in libpq when the parameter value starts with a single-quote character.</li>

<li>Gurjeet Singh sent in a patch to make pgindent work cleanly.</li>

<li>Gurjeet Singh sent in a patch which adds a one-line comment to improve understanding of the VARSIZE_ANY_EXHDR macro.</li>

<li>Kevin Grittner sent in two revisions of a patch to add a pg_matviews catalog view.</li>

<li>Alexander Law sent in a patch to fix an issue where postmaster messages were unreadable in a Windows console.</li>

<li>Andres Freund sent in a patch to fix up the conversion of a relation to a view for TOAST, etc.</li>

<li>Amit Kapila and Heikki Linnakangas traded patches to add PQconninfoParseParams and PQconninfodefaultsMerge to libpq.</li>

<li>Etsuro Fujita sent in another revision of a patch to add hooks for pre- and post-processor executables for COPY and \copy.</li>

<li>Alvaro Herrera sent in another revision of a patch to add an event trigger on DDL DROP.</li>

<li>Michael Paquier sent in two more revisions of a patch to add REINDEX CONCURRENTLY.</li>

<li>Pavel Stehule sent in another revision of a patch to unify the serializations of booleans and domains over same in XML.</li>

<li>Dimitri Fontaine sent in another revision of a patch to add Extension Templates.</li>

<li>Zoltan Boszormenyi sent in another revision of a patch to fix a lock timeout issue.</li>

</ul>